module.exports = {
  root: true,
  env: {
    es2022: true,
    node: true
  },
  parser: '@typescript-eslint/parser',
  parserOptions: {
    ecmaVersion: 2022,
    sourceType: 'module'
  },
  plugins: ['@typescript-eslint'],
  extends: ['eslint:recommended', 'plugin:@typescript-eslint/recommended'],
  ignorePatterns: [
    'dist/**',
    'node_modules/**',
    'data/**',
    'presets/custom/**',
    'public/pathTree.js'
  ],
  rules: {
    '@typescript-eslint/no-explicit-any': 'off',
    '@typescript-eslint/no-non-null-assertion': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off'
  },
  overrides: [
    {
      files: ['public/**/*.js'],
      env: {
        browser: true,
        es2022: true
      },
      parser: 'espree',
      parserOptions: {
        ecmaVersion: 2022,
        sourceType: 'module'
      },
      extends: ['eslint:recommended'],
      rules: {
        // Disable no-unused-vars for global functions called from HTML
        'no-unused-vars': 'off',
        '@typescript-eslint/no-unused-vars': 'off',
        // Allow redeclaring globals for module exports
        'no-redeclare': 'off'
      },
      globals: {
        // From app-state.js
        API_BASE: 'readonly',
        preferences: 'writable',
        metadata: 'writable',
        availablePaths: 'writable',
        signalKValues: 'writable',
        signalKValueDetails: 'writable',
        signalKMetadata: 'writable',
        BUILT_IN_PRESETS: 'readonly',
        lastAppliedPresetId: 'writable',
        originalPresetState: 'writable',
        unitSchema: 'writable',
        // From app-utils.js
        sanitizeIdSegment: 'readonly',
        buildConversionId: 'readonly',
        getCurrentValue: 'readonly',
        getCurrentValueDetails: 'readonly',
        findMatchingPattern: 'readonly',
        showStatus: 'readonly',
        switchTab: 'readonly',
        setupTabs: 'readonly',
        // From app-api.js
        apiLoadSchema: 'readonly',
        apiLoadCategories: 'readonly',
        apiLoadOverrides: 'readonly',
        apiLoadPatterns: 'readonly',
        apiLoadMetadata: 'readonly',
        apiLoadCurrentPreset: 'readonly',
        apiLoadAllData: 'readonly',
        apiGetCategoriesForBaseUnit: 'readonly',
        apiGetConversionForPath: 'readonly',
        apiUpdateCategory: 'readonly',
        apiDeleteCategory: 'readonly',
        apiCreatePattern: 'readonly',
        apiUpdatePattern: 'readonly',
        apiDeletePattern: 'readonly',
        apiCreateOverride: 'readonly',
        apiUpdateOverride: 'readonly',
        apiDeleteOverride: 'readonly',
        apiSaveMetadata: 'readonly',
        apiSendSignalKMetadata: 'readonly',
        apiLoadSignalKMetadata: 'readonly',
        apiLoadUnitDefinitions: 'readonly',
        apiCreateBaseUnit: 'readonly',
        apiUpdateBaseUnit: 'readonly',
        apiDeleteBaseUnit: 'readonly',
        apiCreateConversion: 'readonly',
        apiUpdateConversion: 'readonly',
        apiDeleteConversion: 'readonly',
        apiLoadCustomPresets: 'readonly',
        apiSaveCustomPreset: 'readonly',
        apiDeleteCustomPreset: 'readonly',
        apiSetCurrentPreset: 'readonly',
        apiDownloadCustomPreset: 'readonly',
        apiUploadCustomPreset: 'readonly',
        apiCreateBackup: 'readonly',
        apiRestoreBackup: 'readonly',
        apiDownloadFile: 'readonly',
        apiUploadFile: 'readonly',
        // From app-dropdowns.js
        createBaseUnitDropdown: 'readonly',
        createCategoryDropdown: 'readonly',
        createTargetUnitDropdown: 'readonly',
        populateSmartCategoryDropdown: 'readonly',
        // From app-main.js
        loadSchema: 'readonly',
        loadData: 'readonly',
        downloadBackup: 'readonly',
        restoreBackup: 'readonly',
        downloadFile: 'readonly',
        uploadFile: 'readonly',
        // From app-categories.js
        saveOriginalPresetState: 'readonly',
        checkPresetDirty: 'readonly',
        renderCurrentPreset: 'readonly',
        renderCategories: 'readonly',
        updateCategory: 'readonly',
        addCustomCategory: 'readonly',
        deleteCategory: 'readonly',
        editCategory: 'readonly',
        saveEditCategory: 'readonly',
        cancelEditCategory: 'readonly',
        initializeCustomCategoryDropdowns: 'readonly',
        attachNewCategoryTargetHandler: 'readonly',
        saveCustomPreset: 'readonly',
        loadCustomPresets: 'readonly',
        applyCustomPreset: 'readonly',
        deleteCustomPreset: 'readonly',
        renderCustomPresets: 'readonly',
        applyUnitPreset: 'readonly',
        downloadCustomPreset: 'readonly',
        uploadCustomPreset: 'readonly',
        // From app-patterns.js
        initializePatternDropdowns: 'readonly',
        attachBaseUnitHandler: 'readonly',
        attachTargetUnitHandler: 'readonly',
        renderPatterns: 'readonly',
        addPattern: 'readonly',
        editPattern: 'readonly',
        saveEditPattern: 'readonly',
        cancelEditPattern: 'readonly',
        deletePattern: 'readonly',
        createPatternFromPath: 'readonly',
        // From app-overrides.js
        renderPathOverrides: 'readonly',
        addPathOverride: 'readonly',
        editPathOverride: 'readonly',
        saveEditPathOverride: 'readonly',
        cancelEditPathOverride: 'readonly',
        deletePathOverride: 'readonly',
        initializePathOverridesDropdowns: 'readonly',
        initializePathAutocomplete: 'readonly',
        createOverrideFromPath: 'readonly',
        // From app-unit-definitions.js
        addBaseUnit: 'readonly',
        addConversion: 'readonly',
        loadUnitDefinitions: 'readonly',
        renderUnitDefinitions: 'readonly',
        deleteBaseUnit: 'readonly',
        deleteConversion: 'readonly',
        toggleUnitItem: 'readonly',
        editBaseUnit: 'readonly',
        saveEditBaseUnit: 'readonly',
        cancelEditBaseUnit: 'readonly',
        editConversion: 'readonly',
        saveEditConversion: 'readonly',
        cancelEditConversion: 'readonly',
        initializeUnitDefinitionsDropdowns: 'readonly',
        // From app-metadata.js
        getAllSignalKMetadata: 'readonly',
        matchesPattern: 'readonly',
        findMatchingPatternForPath: 'readonly',
        renderMetadata: 'readonly',
        filterAndSortMetadata: 'readonly',
        renderMetadataTable: 'readonly',
        handleBaseUnitChange: 'readonly',
        handleConversionTemplateChange: 'readonly',
        selectMetadataPath: 'readonly',
        renderConversionsList: 'readonly',
        addConversionToMetadata: 'readonly',
        removeConversion: 'readonly',
        saveMetadata: 'readonly',
        clearMetadataForm: 'readonly',
        filterMetadataByStatus: 'readonly',
        clearMetadataFilter: 'readonly',
        // From pathTree.js
        loadPaths: 'readonly',
        toggleTreeNode: 'readonly',
        selectPath: 'readonly'
      }
    }
  ]
}
